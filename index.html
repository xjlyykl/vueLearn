<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./index.css">
</head>
<body>
    <div id="app" >
    
        
            <div class="goods" v-for="(goods,goodsIndex) in goodsList" :key="goods.id">
                <div class="title">{{ goods.titile }}:</div>
                <ul class="type-list" v-for="(type,typeIndex) in goods.typeList " :key="type" 
                   
                
                >
                    <li class="type" 
                    :class="{active:typeIndex === goods.index}"
                    @click="handleClick(typeIndex,goodsIndex,type)"
                    > {{ type }}</li>
                   </ul>
            </div>
        
            <div class="choose-type">
                <div>已选条件：
                
                </div>
                <span class="no-goods"
                    v-if="!showFilterGoods"
                >暂时没有选择过滤条件</span>
                <ul class="filter-list"
                    v-else=""
                >
                    <li v-for="(list,index) in filterList">{{ list }}
                        <span class="delete-goods" @click="deleteClick(index)" >x</span>
                    </li> 
                </ul>
            </div>
        
    </div>
    <script src="./vue.js"></script>
 
    <script>
        const vm = new Vue({
            el: "#app",
            data:{
                filterList:{},
                showFilterGoods:false,
               
                goodsList:[
                                {
                                    titile:'上装',
                                    typeList:['全部','针织衫','毛呢外套','T恤','羽绒服','棉衣','卫衣'],
                                    id:1
                                },
                                {
                                    titile:'裤装',
                                    typeList:['全部','牛仔裤','小脚/铅笔裤','休闲裤','打底裤','哈伦裤',],
                                    id:2
                                },
                                {
                                    titile:'裙装',
                                    typeList:['全部','连衣裤','半身裙','长袖连衣裙','中长款连衣裙',],
                                    id:3
                                },

                            ]
                
            },
            methods:{
                handleClick(index,goodsIndex,type){
                    if(type === "全部"){
                        return;
                    }
                    this.goodsList[goodsIndex].index = index;
                    vm.$set(this.filterList,goodsIndex,type);
                   
                    this.showFilterGoods = true;
                },
                deleteClick(index){
                    vm.$delete(this.filterList,index);
                    this.goodsList[index].index = 0;
                    this.changeShowFilter();
                },
                changeShowFilter(){
                    const filterObjStr = JSON.stringify(this.filterList);
                    if(filterObjStr == "{}"){
                        this.showFilterGoods= false;
                    }
                }
            }
           
        });

        vm.goodsList.forEach(item=>vm.$set(item,"index",0))
    </script>
</body>
</html>